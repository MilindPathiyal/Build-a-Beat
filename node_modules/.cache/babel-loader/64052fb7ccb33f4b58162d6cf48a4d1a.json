{"ast":null,"code":"var _jsxFileName = \"/Users/michael/Documents/GitHub/Build-a-Beat/src/Editor.js\";\nimport React, { Component } from \"react\";\nimport * as Tone from \"tone\";\nimport \"./App.css\";\nimport kick from \"./images/kick.png\";\nimport snare from \"./images/snare.png\";\nimport hihat from \"./images/hihat.png\";\nimport Title from \"./components/Title.js\";\nimport Cell from \"./components/Cell.js\";\nimport PlayPause from \"./components/PlayPause.js\";\nimport ClearPattern from \"./components/ClearPattern.js\";\nimport RandomPattern from \"./components/RandomPattern.js\";\nimport BpmSlider from \"./components/BpmSlider.js\";\nimport VolumeSlider from \"./components/VolumeSlider.js\";\nimport SwingSlider from \"./components/SwingSlider.js\";\nimport RecordStart from \"./components/RecordStart.js\";\nimport KickTuningKnob from \"./components/KickTuningKnob.js\";\nimport SnareDelayKnob from \"./components/SnareDelayKnob.js\";\nimport HihatDecayKnob from \"./components/HihatDecayKnob.js\";\n\nclass Editor extends Component {\n  constructor(...args) {\n    super(...args);\n    this.getBpm = 120;\n    this.getPitch = 44;\n    this.getBeatDensity = 0.7;\n    this.state = this.props.location.aboutProps.state ? this.props.location.aboutProps.state : {\n      steps: [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],\n      bpm: this.getBpm,\n      notes: [\"A\", \"C#\", \"E\", \"F#\"],\n      column: 0,\n      activeColumn: 0,\n      time: 0,\n      masterVolume: 0,\n      kickDrumTuning: this.getPitch,\n      closedHihatDecayLevel: 0,\n      mediaRecorderState: false\n    };\n    this.appVol = new Tone.Volume();\n    this.pingPong = new Tone.PingPongDelay({\n      delayTime: \"8n\",\n      feedback: 0.32,\n      wet: 0 // wet level can be modified by user via the snaredelayknob\n\n    });\n    this.kickComp = new Tone.Compressor(-30, 2);\n    this.kick = new Tone.MembraneSynth({\n      volume: 0,\n      pitchDecay: 0.032,\n      octaves: 6,\n      oscillator: {\n        type: \"square4\"\n      },\n      envelope: {\n        attack: 0.01,\n        decay: 0.2,\n        sustain: 0.01,\n        release: 0.75\n      }\n    }).chain(this.kickComp, this.appVol, Tone.Master);\n    this.snare = new Tone.NoiseSynth({\n      volume: -8.3,\n      noise: {\n        type: \"pink\"\n      },\n      envelope: {\n        attack: 0.002,\n        decay: 0.21,\n        sustain: 0.05\n      }\n    }).chain(this.pingPong, this.appVol, Tone.Master);\n    this.closedHihat = new Tone.MetalSynth({\n      volume: -58,\n      frequency: 150,\n      envelope: {\n        attack: 0.002,\n        decay: 0.25,\n        release: 0.025\n      },\n      harmonicity: 4.1,\n      modulationIndex: 40,\n      resonance: 2000,\n      octaves: 1\n    }).chain(this.appVol, Tone.Master);\n    this.audioContext = Tone.context;\n    this.dest = this.audioContext.createMediaStreamDestination();\n    this.recorder = new MediaRecorder(this.dest.stream);\n    this.output = Tone.Master;\n    this.chunks = [];\n\n    this.changeKickDrumTuning = value => {\n      this.setState({\n        kickDrumTuning: value\n      });\n    };\n\n    this.changePingPongDelayLevel = value => {\n      this.pingPong.wet.value = value;\n    };\n\n    this.changeCymbalDecayLevel = value => {\n      this.closedHihat.envelope.decay = value;\n    };\n\n    this.changeVolume = value => {\n      this.appVol.volume.value = value;\n      this.setState({\n        masterVolume: value\n      });\n    };\n\n    this.changeSwing = value => {\n      Tone.Transport.swing = value;\n    };\n\n    this.changeBpm = value => {\n      Tone.Transport.bpm.value = value;\n      this.setState({\n        bpm: value\n      });\n    };\n\n    this.play = () => {\n      Tone.Transport.bpm.value = this.state.bpm;\n      Tone.Transport.toggle();\n    };\n\n    this.pause = () => {\n      Tone.Transport.stop();\n      console.log(\"paused\");\n    };\n\n    this.stepToggle = (x, y) => {\n      if (this.state.steps[x][y] === 0) {\n        const newSteps = this.state.steps;\n        newSteps[x][y] = 1;\n        this.setState({\n          steps: newSteps\n        });\n      } else {\n        const newSteps = this.state.steps;\n        newSteps[x][y] = 0;\n        this.setState({\n          steps: newSteps\n        });\n      }\n\n      console.log(`You Clicked ${x} and ${y}`);\n    };\n\n    this.randomPattern = () => {\n      let makeARandomNumber = () => {\n        return Math.random() > this.getBeatDensity ? 1 : 0; // if number returned is greater 0.8 than make it 1 otherwise its 0\n      };\n\n      let randoms = Array(16).fill(0).map(makeARandomNumber);\n      let randoms1 = Array(16).fill(0).map(makeARandomNumber);\n      let randoms2 = Array(16).fill(0).map(makeARandomNumber);\n      let randomSteps = [randoms, randoms1, randoms2];\n      this.setState({\n        steps: randomSteps\n      });\n    };\n\n    this.clearPattern = () => {\n      this.setState({\n        steps: [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]\n      });\n    };\n\n    this.record = () => {\n      // if (this.state.mediaRecorderState === false) {\n      //   this.output.connect(this.dest);\n      //   this.recorder.start()\n      //   this.recorder.ondataavailable = evt => this.chunks.push(evt.data);\n      //   this.setState({\n      //     mediaRecorderState: true\n      //   })\n      // } else {\n      //   this.recorder.stop()\n      //   this.recorder.onstop = evt => {\n      //     let blob = new Blob(this.chunks, { type: 'audio/wav; codecs=opus' });\n      // // this.audio.src = URL.createObjectURL(blob);\n      //     download(blob, \"rhythmcomposer.wav\", 'audio/wav')\n      //   };\n      //   this.setState({\n      //     mediaRecorderState: false\n      //   })\n      //   this.chunks = [];\n      // }\n      console.log(\"NOT IMPLEMENTED\");\n    };\n  }\n\n  // ON INIT //\n  componentDidMount() {\n    this.loop = new Tone.Sequence((time, col) => {\n      this.setState({\n        column: col\n      });\n      this.state.steps.map((row, noteIndex) => {\n        if (row === this.state.steps[0] && row[col]) {\n          // randomised velocities (volume of each triggered note)\n          let vel = Math.random() * 0.5 + 0.5; // Trigger the sound to be played here\n\n          return this.kick.triggerAttackRelease(this.state.kickDrumTuning, \"16n\", time, vel);\n        } else if (row === this.state.steps[2] && row[col]) {\n          let vel = Math.random() * 0.45 + 0.45;\n          this.snare.triggerAttackRelease(\"16n\", time, vel);\n        } else if (row === this.state.steps[1] && row[col]) {\n          // let vel = Math.random() * 0.5 + 0.5;\n          this.closedHihat.triggerAttackRelease(\"16n\", time, -12);\n        }\n      });\n      this.setState({\n        activeColumn: col\n      });\n      this.setState({\n        time: time\n      }); // Tone.Draw.schedule(() => {\n      //   this.backgroundDisco()\n      // }, \"16n\", time);\n    }, [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], // or this.state.steps[0].map((_, i) => i) -\n    \"16n\").start(0);\n    this.setState({\n      masterVolume: this.appVol.volume.value\n    });\n    return () => this.loop.dispose();\n  } // PATTERN-RELATED FUNCTIONS //\n\n\n  render() {\n    let cells = this.state.steps.map((row, xCoord) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 9\n        }\n      }, row.map((cell, yCoord) => /*#__PURE__*/React.createElement(Cell, {\n        stepToggle: this.stepToggle,\n        x: xCoord,\n        y: yCoord,\n        activeColumn: this.state.activeColumn,\n        steps: this.state.steps,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 13\n        }\n      })));\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ui grid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sixteen wide column\",\n      style: {\n        \"text-align\": \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"intrumentImages\",\n      class: \"one wide column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"kick\",\n      src: kick,\n      alt: \"kick\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      className: \"hihat\",\n      src: hihat,\n      alt: \"hihat\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      className: \"snare\",\n      src: snare,\n      alt: \"snare\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"musicGrid\",\n      className: \"fourteen wide column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 13\n      }\n    }, cells), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"knobImages\",\n      className: \"one wide column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(KickTuningKnob, {\n      changeKickDrumTuning: this.changeKickDrumTuning,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(HihatDecayKnob, {\n      changeCymbalDecayLevel: this.changeCymbalDecayLevel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(SnareDelayKnob, {\n      changePingPongDelayLevel: this.changePingPongDelayLevel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      style: {\n        marginHorizontal: 50\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"one wide column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"three wide column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(PlayPause, {\n      play: this.play,\n      pause: this.pause,\n      playState: this.playState,\n      beat: this.state,\n      style: {\n        marginBottom: \"1rem\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(RecordStart, {\n      className: \"record-button\",\n      record: this.record,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"three wide column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ClearPattern, {\n      clearPattern: this.clearPattern,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"three wide column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(RandomPattern, {\n      randomPattern: this.randomPattern,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"two wide column center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(BpmSlider, {\n      changeBpm: this.changeBpm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"two wide column center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(SwingSlider, {\n      changeSwing: this.changeSwing,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"two wide column center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(VolumeSlider, {\n      changeVolume: this.changeVolume,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 15\n      }\n    })))));\n  }\n\n}\n\nexport default Editor;","map":{"version":3,"sources":["/Users/michael/Documents/GitHub/Build-a-Beat/src/Editor.js"],"names":["React","Component","Tone","kick","snare","hihat","Title","Cell","PlayPause","ClearPattern","RandomPattern","BpmSlider","VolumeSlider","SwingSlider","RecordStart","KickTuningKnob","SnareDelayKnob","HihatDecayKnob","Editor","getBpm","getPitch","getBeatDensity","state","props","location","aboutProps","steps","bpm","notes","column","activeColumn","time","masterVolume","kickDrumTuning","closedHihatDecayLevel","mediaRecorderState","appVol","Volume","pingPong","PingPongDelay","delayTime","feedback","wet","kickComp","Compressor","MembraneSynth","volume","pitchDecay","octaves","oscillator","type","envelope","attack","decay","sustain","release","chain","Master","NoiseSynth","noise","closedHihat","MetalSynth","frequency","harmonicity","modulationIndex","resonance","audioContext","context","dest","createMediaStreamDestination","recorder","MediaRecorder","stream","output","chunks","changeKickDrumTuning","value","setState","changePingPongDelayLevel","changeCymbalDecayLevel","changeVolume","changeSwing","Transport","swing","changeBpm","play","toggle","pause","stop","console","log","stepToggle","x","y","newSteps","randomPattern","makeARandomNumber","Math","random","randoms","Array","fill","map","randoms1","randoms2","randomSteps","clearPattern","record","componentDidMount","loop","Sequence","col","row","noteIndex","vel","triggerAttackRelease","start","dispose","render","cells","xCoord","cell","yCoord","marginHorizontal","playState","marginBottom"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport * as Tone from \"tone\";\n\nimport \"./App.css\";\n\nimport kick from \"./images/kick.png\";\nimport snare from \"./images/snare.png\";\nimport hihat from \"./images/hihat.png\";\n\nimport Title from \"./components/Title.js\";\nimport Cell from \"./components/Cell.js\";\nimport PlayPause from \"./components/PlayPause.js\";\nimport ClearPattern from \"./components/ClearPattern.js\";\nimport RandomPattern from \"./components/RandomPattern.js\";\nimport BpmSlider from \"./components/BpmSlider.js\";\nimport VolumeSlider from \"./components/VolumeSlider.js\";\nimport SwingSlider from \"./components/SwingSlider.js\";\nimport RecordStart from \"./components/RecordStart.js\";\nimport KickTuningKnob from \"./components/KickTuningKnob.js\";\nimport SnareDelayKnob from \"./components/SnareDelayKnob.js\";\nimport HihatDecayKnob from \"./components/HihatDecayKnob.js\";\n\nclass Editor extends Component {\n  getBpm = 120;\n  getPitch = 44;\n  getBeatDensity = 0.7;\n\n  state = this.props.location.aboutProps.state\n    ? this.props.location.aboutProps.state\n    : {\n        steps: [\n          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n        ],\n        bpm: this.getBpm,\n        notes: [\"A\", \"C#\", \"E\", \"F#\"],\n        column: 0,\n        activeColumn: 0,\n        time: 0,\n        masterVolume: 0,\n        kickDrumTuning: this.getPitch,\n        closedHihatDecayLevel: 0,\n        mediaRecorderState: false,\n      };\n\n  /// INIT SYNTHS & FX ///\n\n  // create master volume for App\n  appVol = new Tone.Volume();\n\n  // create pingpong delay for snare\n  pingPong = new Tone.PingPongDelay({\n    delayTime: \"8n\",\n    feedback: 0.32,\n    wet: 0, // wet level can be modified by user via the snaredelayknob\n  });\n\n  // create compressor for kick\n  kickComp = new Tone.Compressor(-30, 2);\n\n  // kick\n  kick = new Tone.MembraneSynth({\n    volume: 0,\n    pitchDecay: 0.032,\n    octaves: 6,\n    oscillator: {\n      type: \"square4\",\n    },\n    envelope: {\n      attack: 0.01,\n      decay: 0.2,\n      sustain: 0.01,\n      release: 0.75,\n    },\n  }).chain(this.kickComp, this.appVol, Tone.Master);\n\n  // snare\n  snare = new Tone.NoiseSynth({\n    volume: -8.3,\n    noise: {\n      type: \"pink\",\n    },\n    envelope: {\n      attack: 0.002,\n      decay: 0.21,\n      sustain: 0.05,\n    },\n  }).chain(this.pingPong, this.appVol, Tone.Master);\n\n  // hihat\n  closedHihat = new Tone.MetalSynth({\n    volume: -58,\n    frequency: 150,\n    envelope: {\n      attack: 0.002,\n      decay: 0.25,\n      release: 0.025,\n    },\n    harmonicity: 4.1,\n    modulationIndex: 40,\n    resonance: 2000,\n    octaves: 1,\n  }).chain(this.appVol, Tone.Master);\n\n  // RECORDING VARIABLES //\n\n  audioContext = Tone.context;\n\n  dest = this.audioContext.createMediaStreamDestination();\n\n  recorder = new MediaRecorder(this.dest.stream);\n\n  output = Tone.Master;\n\n  chunks = [];\n\n  // CHANGE FUNCTIONS //\n\n  changeKickDrumTuning = (value) => {\n    this.setState({\n      kickDrumTuning: value,\n    });\n  };\n\n  // delay for snare\n  changePingPongDelayLevel = (value) => {\n    this.pingPong.wet.value = value;\n  };\n\n  changeCymbalDecayLevel = (value) => {\n    this.closedHihat.envelope.decay = value;\n  };\n\n  changeVolume = (value) => {\n    this.appVol.volume.value = value;\n\n    this.setState({\n      masterVolume: value,\n    });\n  };\n\n  changeSwing = (value) => {\n    Tone.Transport.swing = value;\n  };\n\n  changeBpm = (value) => {\n    Tone.Transport.bpm.value = value;\n\n    this.setState({\n      bpm: value,\n    });\n  };\n\n  play = () => {\n    Tone.Transport.bpm.value = this.state.bpm;\n    Tone.Transport.toggle();\n  };\n\n  pause = () => {\n    Tone.Transport.stop();\n    console.log(\"paused\");\n  };\n\n  stepToggle = (x, y) => {\n    if (this.state.steps[x][y] === 0) {\n      const newSteps = this.state.steps;\n      newSteps[x][y] = 1;\n      this.setState({ steps: newSteps });\n    } else {\n      const newSteps = this.state.steps;\n      newSteps[x][y] = 0;\n      this.setState({ steps: newSteps });\n    }\n    console.log(`You Clicked ${x} and ${y}`);\n  };\n\n  // ON INIT //\n\n  componentDidMount() {\n    this.loop = new Tone.Sequence(\n      (time, col) => {\n        this.setState({\n          column: col,\n        });\n\n        this.state.steps.map((row, noteIndex) => {\n          if (row === this.state.steps[0] && row[col]) {\n            // randomised velocities (volume of each triggered note)\n            let vel = Math.random() * 0.5 + 0.5;\n            // Trigger the sound to be played here\n\n            return this.kick.triggerAttackRelease(\n              this.state.kickDrumTuning,\n              \"16n\",\n              time,\n              vel\n            );\n          } else if (row === this.state.steps[2] && row[col]) {\n            let vel = Math.random() * 0.45 + 0.45;\n            this.snare.triggerAttackRelease(\"16n\", time, vel);\n          } else if (row === this.state.steps[1] && row[col]) {\n            // let vel = Math.random() * 0.5 + 0.5;\n            this.closedHihat.triggerAttackRelease(\"16n\", time, -12);\n          }\n        });\n        this.setState({\n          activeColumn: col,\n        });\n\n        this.setState({\n          time: time,\n        });\n\n        // Tone.Draw.schedule(() => {\n        //   this.backgroundDisco()\n        // }, \"16n\", time);\n      },\n      [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], // or this.state.steps[0].map((_, i) => i) -\n      \"16n\"\n    ).start(0);\n\n    this.setState({\n      masterVolume: this.appVol.volume.value,\n    });\n    return () => this.loop.dispose();\n  }\n\n  // PATTERN-RELATED FUNCTIONS //\n\n  randomPattern = () => {\n    let makeARandomNumber = () => {\n      return Math.random() > this.getBeatDensity ? 1 : 0; // if number returned is greater 0.8 than make it 1 otherwise its 0\n    };\n\n    let randoms = Array(16).fill(0).map(makeARandomNumber);\n    let randoms1 = Array(16).fill(0).map(makeARandomNumber);\n    let randoms2 = Array(16).fill(0).map(makeARandomNumber);\n\n    let randomSteps = [randoms, randoms1, randoms2];\n\n    this.setState({\n      steps: randomSteps,\n    });\n  };\n\n  clearPattern = () => {\n    this.setState({\n      steps: [\n        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n      ],\n    });\n  };\n\n  record = () => {\n    // if (this.state.mediaRecorderState === false) {\n    //   this.output.connect(this.dest);\n    //   this.recorder.start()\n\n    //   this.recorder.ondataavailable = evt => this.chunks.push(evt.data);\n\n    //   this.setState({\n    //     mediaRecorderState: true\n    //   })\n    // } else {\n    //   this.recorder.stop()\n\n    //   this.recorder.onstop = evt => {\n    //     let blob = new Blob(this.chunks, { type: 'audio/wav; codecs=opus' });\n    // // this.audio.src = URL.createObjectURL(blob);\n    //     download(blob, \"rhythmcomposer.wav\", 'audio/wav')\n    //   };\n\n    //   this.setState({\n    //     mediaRecorderState: false\n    //   })\n\n    //   this.chunks = [];\n    // }\n    console.log(\"NOT IMPLEMENTED\");\n  };\n\n  render() {\n    let cells = this.state.steps.map((row, xCoord) => {\n      return (\n        <div className=\"row\">\n          {row.map((cell, yCoord) => (\n            <Cell\n              stepToggle={this.stepToggle}\n              x={xCoord}\n              y={yCoord}\n              activeColumn={this.state.activeColumn}\n              steps={this.state.steps}\n            />\n          ))}\n        </div>\n      );\n    });\n\n    return (\n      <div className=\"App\">\n        <div className=\"ui grid\">\n          <div className=\"row\">\n            <div\n              className=\"sixteen wide column\"\n              style={{ \"text-align\": \"center\" }}\n            >\n              <Title />\n            </div>\n          </div>\n\n          <div className=\"row\">\n            <div id=\"intrumentImages\" class=\"one wide column\">\n              <img className=\"kick\" src={kick} alt=\"kick\" />\n              <img className=\"hihat\" src={hihat} alt=\"hihat\" />\n              <img className=\"snare\" src={snare} alt=\"snare\" />\n            </div>\n\n            <div id=\"musicGrid\" className=\"fourteen wide column\">\n              {cells}\n            </div>\n\n            <div id=\"knobImages\" className=\"one wide column\">\n              <KickTuningKnob\n                changeKickDrumTuning={this.changeKickDrumTuning}\n              />\n              <HihatDecayKnob\n                changeCymbalDecayLevel={this.changeCymbalDecayLevel}\n              />\n              <SnareDelayKnob\n                changePingPongDelayLevel={this.changePingPongDelayLevel}\n              />\n            </div>\n          </div>\n\n          <div className=\"row\" style={{ marginHorizontal: 50 }}>\n            <div className=\"one wide column\"></div>\n            <div className=\"three wide column\">\n              <PlayPause\n                play={this.play}\n                pause={this.pause}\n                playState={this.playState}\n                beat={this.state}\n                style={{ marginBottom: \"1rem\" }}\n              />\n              <RecordStart className=\"record-button\" record={this.record} />\n            </div>\n            <div className=\"three wide column\">\n              <ClearPattern clearPattern={this.clearPattern} />\n            </div>\n            <div className=\"three wide column\">\n              <RandomPattern randomPattern={this.randomPattern} />\n            </div>\n            <div className=\"two wide column center\">\n              <BpmSlider changeBpm={this.changeBpm} />\n            </div>\n            <div className=\"two wide column center\">\n              <SwingSlider changeSwing={this.changeSwing} />\n            </div>\n            <div className=\"two wide column center\">\n              <VolumeSlider changeVolume={this.changeVolume} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Editor;\n"]},"metadata":{},"sourceType":"module"}