{"ast":null,"code":"var _jsxFileName = \"/Users/michael/Documents/GitHub/Build-a-Beat/src/components/Selection.js\";\nimport React, { Component } from \"react\";\nimport \"../App.css\";\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport * as Tone from \"tone\";\nimport PlayPause from \"./PlayPause.js\";\n\nclass Selection extends Component {\n  constructor() {\n    super();\n    this.getBpm = 120;\n    this.getPitch = 44;\n    this.getBeatDensity = 0.7;\n    this.state = {\n      steps: [[1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0], [0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0], [0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 1, 0, 0]],\n      bpm: this.getBpm,\n      notes: [\"A\", \"C#\", \"E\", \"F#\"],\n      column: 0,\n      activeColumn: 0,\n      time: 0,\n      masterVolume: 0,\n      kickDrumTuning: this.getPitch,\n      closedHihatDecayLevel: 0,\n      mediaRecorderState: false\n    };\n    this.state2 = {\n      steps: [[1, 1, 1, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0], [0, 1, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0], [1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0]],\n      bpm: this.getBpm,\n      notes: [\"A\", \"C#\", \"E\", \"F#\"],\n      column: 0,\n      activeColumn: 0,\n      time: 0,\n      masterVolume: 0,\n      kickDrumTuning: this.getPitch,\n      closedHihatDecayLevel: 0,\n      mediaRecorderState: false\n    };\n    this.state3 = {\n      steps: [[0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 0, 1, 1, 0, 1, 1], [0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 1, 0, 1, 0, 0, 0], [0, 1, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 1]],\n      bpm: this.getBpm,\n      notes: [\"A\", \"C#\", \"E\", \"F#\"],\n      column: 0,\n      activeColumn: 0,\n      time: 0,\n      masterVolume: 0,\n      kickDrumTuning: this.getPitch,\n      closedHihatDecayLevel: 0,\n      mediaRecorderState: false\n    };\n    this.appVol = new Tone.Volume();\n    this.pingPong = new Tone.PingPongDelay({\n      delayTime: \"8n\",\n      feedback: 0.32,\n      wet: 0 // wet level can be modified by user via the snaredelayknob\n\n    });\n    this.kickComp = new Tone.Compressor(-30, 2);\n    this.kick = new Tone.MembraneSynth({\n      volume: 0,\n      pitchDecay: 0.032,\n      octaves: 6,\n      oscillator: {\n        type: \"square4\"\n      },\n      envelope: {\n        attack: 0.01,\n        decay: 0.2,\n        sustain: 0.01,\n        release: 0.75\n      }\n    }).chain(this.kickComp, this.appVol, Tone.Master);\n    this.snare = new Tone.NoiseSynth({\n      volume: -8.3,\n      noise: {\n        type: \"pink\"\n      },\n      envelope: {\n        attack: 0.002,\n        decay: 0.21,\n        sustain: 0.05\n      }\n    }).chain(this.pingPong, this.appVol, Tone.Master);\n    this.closedHihat = new Tone.MetalSynth({\n      volume: -58,\n      frequency: 150,\n      envelope: {\n        attack: 0.002,\n        decay: 0.25,\n        release: 0.025\n      },\n      harmonicity: 4.1,\n      modulationIndex: 40,\n      resonance: 2000,\n      octaves: 1\n    }).chain(this.appVol, Tone.Master);\n\n    this.play = beat => {\n      Tone.Transport.bpm.value = this.selectedBeat.bpm;\n      Tone.Transport.toggle();\n    };\n\n    this.pause = () => {\n      Tone.Transport.stop();\n      console.log(\"paused\");\n    };\n\n    this.setBeat = beat => {\n      this.selectedBeat = beat;\n    };\n\n    this.confirmSelection = () => {\n      this.pause();\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const data = new FormData(event.target);\n      console.log(data, \"ASDASDAS\");\n      console.log(data.get(\"username\"));\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    this.loop = new Tone.Sequence((time, col) => {\n      this.setState({\n        column: col\n      });\n      this.selectedBeat.steps.map((row, noteIndex) => {\n        if (row === this.selectedBeat.steps[0] && row[col]) {\n          // randomised velocities (volume of each triggered note)\n          let vel = Math.random() * 0.5 + 0.5; // Trigger the sound to be played here\n\n          return this.kick.triggerAttackRelease(this.selectedBeat.kickDrumTuning, \"16n\", time, vel);\n        } else if (row === this.selectedBeat.steps[2] && row[col]) {\n          let vel = Math.random() * 0.45 + 0.45;\n          this.snare.triggerAttackRelease(\"16n\", time, vel);\n        } else if (row === this.selectedBeat.steps[1] && row[col]) {\n          // let vel = Math.random() * 0.5 + 0.5;\n          this.closedHihat.triggerAttackRelease(\"16n\", time, -12);\n        }\n      }); // Tone.Draw.schedule(() => {\n      //   this.backgroundDisco()\n      // }, \"16n\", time);\n    }, [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], // or this.state.steps[0].map((_, i) => i) -\n    \"16n\").start(0);\n    this.setState({\n      masterVolume: this.appVol.volume.value\n    });\n    return () => this.loop.dispose();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }\n    }, \"Select your preferred rhythm\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 11\n      }\n    }, \"Enter username\"), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"username\",\n      name: \"username\",\n      type: \"text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 11\n      }\n    }, \"Enter your email\"), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"email\",\n      name: \"email\",\n      type: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"birthdate\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }\n    }, \"Enter your birth date\"), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"birthdate\",\n      name: \"birthdate\",\n      type: \"text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 11\n      }\n    }, \"Send data!\")), /*#__PURE__*/React.createElement(PlayPause, {\n      play: this.play,\n      pause: this.pause,\n      playState: this.playState,\n      beat: this.state,\n      setBeat: this.setBeat,\n      selection: true,\n      style: {\n        marginBottom: \"1rem\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(PlayPause, {\n      play: this.play,\n      pause: this.pause,\n      playState: this.playState,\n      beat: this.state2,\n      setBeat: this.setBeat,\n      selection: true,\n      style: {\n        marginBottom: \"1rem\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(PlayPause, {\n      play: this.play,\n      pause: this.pause,\n      playState: this.playState,\n      beat: this.state3,\n      setBeat: this.setBeat,\n      selection: true,\n      style: {\n        marginBottom: \"1rem\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.confirmSelection,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: {\n        pathname: \"/editor\",\n        aboutProps: {\n          state: this.selectedBeat\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 11\n      }\n    }, \"Next\")));\n  }\n\n}\n\nexport default Selection;","map":{"version":3,"sources":["/Users/michael/Documents/GitHub/Build-a-Beat/src/components/Selection.js"],"names":["React","Component","BrowserRouter","Router","Switch","Route","Link","Tone","PlayPause","Selection","constructor","getBpm","getPitch","getBeatDensity","state","steps","bpm","notes","column","activeColumn","time","masterVolume","kickDrumTuning","closedHihatDecayLevel","mediaRecorderState","state2","state3","appVol","Volume","pingPong","PingPongDelay","delayTime","feedback","wet","kickComp","Compressor","kick","MembraneSynth","volume","pitchDecay","octaves","oscillator","type","envelope","attack","decay","sustain","release","chain","Master","snare","NoiseSynth","noise","closedHihat","MetalSynth","frequency","harmonicity","modulationIndex","resonance","play","beat","Transport","value","selectedBeat","toggle","pause","stop","console","log","setBeat","confirmSelection","handleSubmit","event","preventDefault","data","FormData","target","get","bind","componentDidMount","loop","Sequence","col","setState","map","row","noteIndex","vel","Math","random","triggerAttackRelease","start","dispose","render","playState","marginBottom","pathname","aboutProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"../App.css\";\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport * as Tone from \"tone\";\n\nimport PlayPause from \"./PlayPause.js\";\n\nclass Selection extends Component {\n  constructor() {\n    super();\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n  getBpm = 120;\n  getPitch = 44;\n  getBeatDensity = 0.7;\n  selectedBeat;\n\n  state = {\n    steps: [\n      [1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0],\n      [0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0],\n      [0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 1, 0, 0],\n    ],\n    bpm: this.getBpm,\n    notes: [\"A\", \"C#\", \"E\", \"F#\"],\n    column: 0,\n    activeColumn: 0,\n    time: 0,\n    masterVolume: 0,\n    kickDrumTuning: this.getPitch,\n    closedHihatDecayLevel: 0,\n    mediaRecorderState: false,\n  };\n\n  state2 = {\n    steps: [\n      [1, 1, 1, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0],\n      [0, 1, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0],\n      [1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0],\n    ],\n    bpm: this.getBpm,\n    notes: [\"A\", \"C#\", \"E\", \"F#\"],\n    column: 0,\n    activeColumn: 0,\n    time: 0,\n    masterVolume: 0,\n    kickDrumTuning: this.getPitch,\n    closedHihatDecayLevel: 0,\n    mediaRecorderState: false,\n  };\n\n  state3 = {\n    steps: [\n      [0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 0, 1, 1, 0, 1, 1],\n      [0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 1, 0, 1, 0, 0, 0],\n      [0, 1, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 1],\n    ],\n    bpm: this.getBpm,\n    notes: [\"A\", \"C#\", \"E\", \"F#\"],\n    column: 0,\n    activeColumn: 0,\n    time: 0,\n    masterVolume: 0,\n    kickDrumTuning: this.getPitch,\n    closedHihatDecayLevel: 0,\n    mediaRecorderState: false,\n  };\n\n  /// INIT SYNTHS & FX ///\n\n  // create master volume for App\n  appVol = new Tone.Volume();\n\n  // create pingpong delay for snare\n  pingPong = new Tone.PingPongDelay({\n    delayTime: \"8n\",\n    feedback: 0.32,\n    wet: 0, // wet level can be modified by user via the snaredelayknob\n  });\n\n  // create compressor for kick\n  kickComp = new Tone.Compressor(-30, 2);\n\n  // kick\n  kick = new Tone.MembraneSynth({\n    volume: 0,\n    pitchDecay: 0.032,\n    octaves: 6,\n    oscillator: {\n      type: \"square4\",\n    },\n    envelope: {\n      attack: 0.01,\n      decay: 0.2,\n      sustain: 0.01,\n      release: 0.75,\n    },\n  }).chain(this.kickComp, this.appVol, Tone.Master);\n\n  // snare\n  snare = new Tone.NoiseSynth({\n    volume: -8.3,\n    noise: {\n      type: \"pink\",\n    },\n    envelope: {\n      attack: 0.002,\n      decay: 0.21,\n      sustain: 0.05,\n    },\n  }).chain(this.pingPong, this.appVol, Tone.Master);\n\n  // hihat\n  closedHihat = new Tone.MetalSynth({\n    volume: -58,\n    frequency: 150,\n    envelope: {\n      attack: 0.002,\n      decay: 0.25,\n      release: 0.025,\n    },\n    harmonicity: 4.1,\n    modulationIndex: 40,\n    resonance: 2000,\n    octaves: 1,\n  }).chain(this.appVol, Tone.Master);\n\n  play = (beat) => {\n    Tone.Transport.bpm.value = this.selectedBeat.bpm;\n    Tone.Transport.toggle();\n  };\n\n  pause = () => {\n    Tone.Transport.stop();\n    console.log(\"paused\");\n  };\n\n  setBeat = (beat) => {\n    this.selectedBeat = beat;\n  };\n\n  confirmSelection = () => {\n    this.pause();\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    const data = new FormData(event.target);\n    console.log(data, \"ASDASDAS\");\n    console.log(data.get(\"username\"));\n  };\n\n  componentDidMount() {\n    this.loop = new Tone.Sequence(\n      (time, col) => {\n        this.setState({\n          column: col,\n        });\n\n        this.selectedBeat.steps.map((row, noteIndex) => {\n          if (row === this.selectedBeat.steps[0] && row[col]) {\n            // randomised velocities (volume of each triggered note)\n            let vel = Math.random() * 0.5 + 0.5;\n            // Trigger the sound to be played here\n\n            return this.kick.triggerAttackRelease(\n              this.selectedBeat.kickDrumTuning,\n              \"16n\",\n              time,\n              vel\n            );\n          } else if (row === this.selectedBeat.steps[2] && row[col]) {\n            let vel = Math.random() * 0.45 + 0.45;\n            this.snare.triggerAttackRelease(\"16n\", time, vel);\n          } else if (row === this.selectedBeat.steps[1] && row[col]) {\n            // let vel = Math.random() * 0.5 + 0.5;\n            this.closedHihat.triggerAttackRelease(\"16n\", time, -12);\n          }\n        });\n\n        // Tone.Draw.schedule(() => {\n        //   this.backgroundDisco()\n        // }, \"16n\", time);\n      },\n      [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], // or this.state.steps[0].map((_, i) => i) -\n      \"16n\"\n    ).start(0);\n\n    this.setState({\n      masterVolume: this.appVol.volume.value,\n    });\n    return () => this.loop.dispose();\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <h2>Select your preferred rhythm</h2>\n        <form onSubmit={this.handleSubmit}>\n          <label htmlFor=\"username\">Enter username</label>\n          <input id=\"username\" name=\"username\" type=\"text\" />\n\n          <label htmlFor=\"email\">Enter your email</label>\n          <input id=\"email\" name=\"email\" type=\"email\" />\n\n          <label htmlFor=\"birthdate\">Enter your birth date</label>\n          <input id=\"birthdate\" name=\"birthdate\" type=\"text\" />\n\n          <button>Send data!</button>\n        </form>\n        <PlayPause\n          play={this.play}\n          pause={this.pause}\n          playState={this.playState}\n          beat={this.state}\n          setBeat={this.setBeat}\n          selection={true}\n          style={{ marginBottom: \"1rem\" }}\n        />\n        <PlayPause\n          play={this.play}\n          pause={this.pause}\n          playState={this.playState}\n          beat={this.state2}\n          setBeat={this.setBeat}\n          selection={true}\n          style={{ marginBottom: \"1rem\" }}\n        />\n        <PlayPause\n          play={this.play}\n          pause={this.pause}\n          playState={this.playState}\n          beat={this.state3}\n          setBeat={this.setBeat}\n          selection={true}\n          style={{ marginBottom: \"1rem\" }}\n        />\n        <button onClick={this.confirmSelection}>\n          <Link\n            to={{\n              pathname: \"/editor\",\n              aboutProps: {\n                state: this.selectedBeat,\n              },\n            }}\n          >\n            Next\n          </Link>\n        </button>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Selection;\n"]},"metadata":{},"sourceType":"module"}